(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{419:function(t,e,v){t.exports=v.p+"assets/img/cosmos2b.c32bd677.jpg"},420:function(t,e,v){t.exports=v.p+"assets/img/eureka.b9d41f9d.png"},421:function(t,e,v){t.exports=v.p+"assets/img/zookeeper.ba9b1ed8.png"},481:function(t,e,v){"use strict";v.r(e);var a=v(33),_=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"cap理论及应用架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cap理论及应用架构"}},[t._v("#")]),t._v(" CAP理论及应用架构")]),t._v(" "),a("p",[t._v("CAP理论是一种计算机科学思想，对于一个分布式系统，不可能提供以下三种保证中的两种以上的保证。\n"),a("img",{attrs:{src:v(419),alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("C:consistency一致性")])]),t._v(" "),a("blockquote",[a("p",[t._v("A:Availability可用性")])]),t._v(" "),a("blockquote",[a("p",[t._v("P:Partition-tolerance分区容错性")])]),t._v(" "),a("p",[t._v("由于是针对分布式数据库环境提出的，由于网络硬件不可避免出现延迟丢包的问题，在分布式中，我们要保证部分网络通信问题不会导致整个服务器集群瘫痪，所以P是必须要具备的，换言之需要选择的是A和C。")]),t._v(" "),a("h3",{attrs:{id:"ap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ap"}},[t._v("#")]),t._v(" AP")]),t._v(" "),a("p",[t._v("当系统分区出现问题时，系统B可以返回旧值，保证可用性。")]),t._v(" "),a("h3",{attrs:{id:"cp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cp"}},[t._v("#")]),t._v(" CP")]),t._v(" "),a("p",[t._v("当系统分区出现问题时，拒绝相关请求，保证一致性。")]),t._v(" "),a("h2",{attrs:{id:"相关服务治理架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关服务治理架构"}},[t._v("#")]),t._v(" 相关服务治理架构")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/chihirotan/p/11366394.html",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Feature")]),t._v(" "),a("th",[t._v("Eureka")]),t._v(" "),a("th",[t._v("Zookeeper")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("CAP实现")]),t._v(" "),a("td",[t._v("AP")]),t._v(" "),a("td",[t._v("CP")])]),t._v(" "),a("tr",[a("td",[t._v("健康检查")]),t._v(" "),a("td",[t._v("可配支持")]),t._v(" "),a("td",[t._v("长连接，keepalive")])]),t._v(" "),a("tr",[a("td",[t._v("watch支持（客户端观察到服务提供者变化）")]),t._v(" "),a("td",[t._v("只支持 long polling/大部分增量")]),t._v(" "),a("td",[t._v("支持，会有通知")])]),t._v(" "),a("tr",[a("td",[t._v("自我保护")]),t._v(" "),a("td",[t._v("支持")]),t._v(" "),a("td",[t._v("-")])]),t._v(" "),a("tr",[a("td",[t._v("客户端缓存")]),t._v(" "),a("td",[t._v("支持")]),t._v(" "),a("td",[t._v("-")])]),t._v(" "),a("tr",[a("td",[t._v("自身集群监控")]),t._v(" "),a("td",[t._v("metrics")]),t._v(" "),a("td",[t._v("-")])])])]),t._v(" "),a("h3",{attrs:{id:"eureka"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eureka"}},[t._v("#")]),t._v(" Eureka")]),t._v(" "),a("p",[a("img",{attrs:{src:v(420),alt:"img"}})]),t._v(" "),a("ul",[a("li",[t._v("服务注册中心失效剔除时间间隔默认60s\n"),a("ul",[a("li",[t._v("eviction-interval-timer-in-ms=60 * 1000")]),t._v(" "),a("li",[t._v("自我保护\n"),a("ul",[a("li",[t._v("renew 15分钟内低于85%不过期不剔除")]),t._v(" "),a("li",[t._v("需要客户端负载均衡")])])])])]),t._v(" "),a("li",[t._v("服务提供者\n"),a("ul",[a("li",[t._v("续约默认间隔30s，失效间隔90s\n"),a("ul",[a("li",[t._v("eureka.instance.lease-renewal-interval-in-seconds=30")]),t._v(" "),a("li",[t._v("eureka.instance.lease-expiration-duration-in-seconds=90")])])])])])]),t._v(" "),a("h3",{attrs:{id:"zookeeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper"}},[t._v("#")]),t._v(" Zookeeper")]),t._v(" "),a("p",[a("img",{attrs:{src:v(421),alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("通过图可知，zookeeper多了monitor模块，以实现watch？")])])])}),[],!1,null,null,null);e.default=_.exports}}]);